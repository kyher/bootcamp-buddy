import type { NextPage } from "next";
import Head from "next/head";
import { BackButton, ViewSection } from "../../components";
import { useEffect, useState } from "react";
import { Activity } from "../../types";

const View: NextPage = () => {
  const [activities, setActivities] = useState<Array<Activity>>([]);

  useEffect(() => {
    const activitiesInStorage = localStorage.getItem("activities");
    console.log(localStorage.getItem("activites"));
    if (activitiesInStorage) {
      setActivities(JSON.parse(activitiesInStorage));
    }
  }, []);

  return (
    <div className="grid place-items-center">
      <Head>
        <title>Your workouts</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <BackButton />
      {activities.length > 0 ? (
        <ViewSection activities={activities} />
      ) : (
        "No activites set yet."
      )}
    </div>
  );
};

export default View;
